using System;using System.Collections.Generic;using System.Diagnostics;using System.Linq;using System.Text.RegularExpressions;namespace ConsoleApp2{public class Program{
private static string line;private static char lastchar = ' ';private static string playing = "?";private static int nbr = - 1;private static int reste = -1;private static Stopwatch w = new Stopwatch();private static Dictionary<char, (long t, string s)> dicoFC = new Dictionary<char, (long t, string s)>();private static Dictionary<char, (long t, string s)> dicoLC = new Dictionary<char, (long t, string s)>();private static int nbrLC = 0;private static int nbrFC = 0;private static bool diff = false;
public static void Main(string[] args){while ((line = Console.ReadLine()) != null){var value = line.Trim();if(lastchar != ' ' && nbr < 0){nbr = int.Parse(value);w.Restart();reste = nbr;}else{if(lastchar == ' '){lastchar = value.Last();}
else{reste--;var fc = value[0];var lc = value.Last();if(playing == "?" && fc == lastchar){playing = value;}if(fc == lastchar){if(fc == lc){if(!dicoFC.ContainsKey(fc) && !dicoLC.ContainsKey(fc)){dicoLC.Add(fc, (w.ElapsedTicks, $"{value}!"));dicoFC.Add(fc, dicoLC[fc]);nbrLC++;}
else if(!dicoFC.ContainsKey(fc)){dicoFC.Add(fc, (w.ElapsedTicks, $"{value}!"));nbrFC++;diff = true;}else if(!dicoLC.ContainsKey(fc)){dicoLC.Add(fc, (w.ElapsedTicks, $"{value}!"));nbrLC++;diff = true;}else{if(isEqual(fc)){dicoFC[fc] = (w.ElapsedTicks, $"{value}!");nbrLC++;diff = true;}}}else{if(!diff){dicoFC[fc] = (w.ElapsedTicks, $"{value}!");
nbrFC++;diff = true;}if(!dicoLC.ContainsKey(lc)){dicoLC.Add(lc, (w.ElapsedTicks, $"{value}!"));nbrLC++;}}}else if(!dicoFC.ContainsKey(fc)){dicoFC.Add(fc, (w.ElapsedTicks, $"{value}!"));nbrFC++;}}}
if(reste == 0){w.Stop();if(!diff)  dicoFC.Remove(lastchar);var ef = dicoLC.Where(c => !dicoFC.ContainsKey(c.Key)).OrderBy(x => x.Value.t).Select(x => x.Value.s).FirstOrDefault();Console.WriteLine(ef != null ? ef : playing);}}
}private static bool isEqual(char k){if(dicoFC.TryGetValue(k,out var tfc) && dicoLC.TryGetValue(k,out var lfc)){return tfc.t == lfc.t;}return false;}}}